<?xml version="1.0" encoding="UTF-8"?>
<configs>
    <append xpath="/entity_classes">
        <!-- Custom dropped loot container for companion-eligible animals -->
        <entity_class name="EntityLootContainerAnimalComp">
            <property name="Class" value="EntityLootContainer"/>
            <property name="UserSpawnType" value="Console"/>
            <property name="Mesh" value="@:Entities/LootContainers/zpackPrefab.prefab"/>
            <property name="ModelType" value="Custom"/>
            <property name="Prefab" value="Backpack"/>
            <property name="Parent" value="Backpack"/>
            <property name="IsEnemyEntity" value="false"/>
            <property name="TimeStayAfterDeath" value="3600"/>
            <property name="LootListOnDeath" value="zPackAnimalComp"/>
            <property name="Faction" value="none"/>
        </entity_class>

        <!-- Dire Wolf specific dropped loot container entity -->
        <entity_class name="EntityLootContainerDireWolf">
            <property name="Class" value="EntityLootContainer"/>
            <property name="UserSpawnType" value="Console"/>
            <property name="Mesh" value="@:Entities/LootContainers/zpackPrefab.prefab"/>
            <property name="ModelType" value="Custom"/>
            <property name="Prefab" value="Backpack"/>
            <property name="Parent" value="Backpack"/>
            <property name="IsEnemyEntity" value="false"/>
            <property name="TimeStayAfterDeath" value="3600"/>
            <property name="LootListOnDeath" value="zPackDireWolf"/>
            <property name="Faction" value="none"/>
        </entity_class>
        
        <!-- Ensure harvesting wild dire wolves yields crafting ingredients -->
        <append xpath="/entity_classes/entity_class[@name='animalDireWolf']">
            <drop event="Harvest" name="itemDireWolfFang" count="1" tag="allToolsHarvest"/>
            <drop event="Harvest" name="itemDireWolfClaw" count="1" tag="allToolsHarvest"/>
        </append>
        <append xpath="/entity_classes/entity_class[@name='animalDireWolf']">
            <drop event="Harvest" name="itemDireWolfFang" count="1" tag="butcherHarvest"/>
            <drop event="Harvest" name="itemDireWolfClaw" count="1" tag="butcherHarvest"/>
        </append>

        <!-- Guarantee kill-bag routing and chance for dire wolves -->
        <set xpath="/entity_classes/entity_class[@name='animalDireWolf']/property[@name='LootDropEntityClass']/@value">EntityLootContainerDireWolf</set>
        <set xpath="/entity_classes/entity_class[@name='animalDireWolf']/property[@name='LootDropProb']/@value">1</set>
        <!-- Force a custom corpse block so harvest always yields fang + claw -->
        <append xpath="/entity_classes/entity_class[@name='animalDireWolf']">
            <property name="CorpseBlock" value="goreBlockDireWolf"/>
            <property name="CorpseBlockChance" value="1"/>
        </append>

        <!-- Coverage: base wolf harvest also yields fang/claw, in case a variant routes here -->
        <append xpath="/entity_classes/entity_class[@name='animalWolf']">
            <drop event="Harvest" name="itemDireWolfFang" count="1" tag="allToolsHarvest"/>
            <drop event="Harvest" name="itemDireWolfClaw" count="1" tag="allToolsHarvest"/>
        </append>
        <append xpath="/entity_classes/entity_class[@name='animalWolf']">
            <drop event="Harvest" name="itemDireWolfFang" count="1" tag="butcherHarvest"/>
            <drop event="Harvest" name="itemDireWolfClaw" count="1" tag="butcherHarvest"/>
        </append>
        <entity_class name="companionDireWolf" extends="animalDireWolf">
            <property name="Tags" value="entity,animal,friendly,wolf,companion"/>
            <property name="SoundIdleProne" value=""/>
            <property name="SoundIdleStand" value=""/>
            <property name="SoundSniffing" value=""/>
            <property name="SoundDetected" value=""/>
            <property name="SoundAlert" value=""/>
            <property name="SoundHurt" value=""/>
            <property name="Faction" value="whiteriver"/>
            <property name="EntityFlags" value="animal"/>
            <property name="ExperienceGain" value="0"/>
            <property name="LootDropProb" value="0"/>
            <property name="LootDropEntityClass" value="EntityLootContainerAnimalComp"/>
            <property name="AITask" value="
    ApproachAndAttackTarget class=EntityZombie,30,EntityEnemyAnimal,20|
    Look|
    Wander|
    "/>
            <property name="AITarget" value="
    SetAsTargetIfHurt class=EntityZombie,EntityEnemyAnimal|
    SetNearestEntityAsTarget class=EntityZombie,17,15,EntityEnemyAnimal,0,0|
    "/>
            <!-- State CVars used by scripts: dwOwnerId, dwMounted, dwSaddled, dwStorageTier, dwVehicleId -->
        </entity_class>
        <entity_class name="companionDireWolfFire" extends="animalDireWolf">
            <property name="Tags" value="entity,animal,friendly,wolf,companion,fire"/>
            <property name="SoundIdleProne" value=""/>
            <property name="SoundIdleStand" value=""/>
            <property name="SoundSniffing" value=""/>
            <property name="SoundDetected" value=""/>
            <property name="SoundAlert" value=""/>
            <property name="SoundHurt" value=""/>
            <property name="Faction" value="whiteriver"/>
            <property name="EntityFlags" value="animal"/>
            <property name="ExperienceGain" value="0"/>
            <property name="LootDropProb" value="0"/>
            <property name="LootDropEntityClass" value="EntityLootContainerAnimalComp"/>
            <property name="AITask" value="
    ApproachAndAttackTarget class=EntityZombie,30,EntityEnemyAnimal,20|
    Look|
    Wander|
    "/>
            <property name="AITarget" value="
    SetAsTargetIfHurt class=EntityZombie,EntityEnemyAnimal|
    SetNearestEntityAsTarget class=EntityZombie,17,15,EntityEnemyAnimal,0,0|
    "/>
        </entity_class>
        <entity_class name="companionBear" extends="animalBear">
            <property name="Tags" value="entity,animal,friendly,bear,companion"/>
            <property name="SoundIdleProne" value=""/>
            <property name="SoundIdleStand" value=""/>
            <property name="SoundDetected" value=""/>
            <property name="SoundAlert" value=""/>
            <property name="SoundHurt" value=""/>
            <property name="Faction" value="whiteriver"/>
            <property name="EntityFlags" value="animal"/>
            <property name="ExperienceGain" value="0"/>
            <property name="LootDropProb" value="0"/>
            <property name="LootDropEntityClass" value="EntityLootContainerAnimalComp"/>
            <property name="AITask" value="
    ApproachAndAttackTarget class=EntityZombie,30,EntityEnemyAnimal,20|
    Look|
    Wander|
    "/>
            <property name="AITarget" value="
    SetAsTargetIfHurt class=EntityZombie,EntityEnemyAnimal|
    SetNearestEntityAsTarget class=EntityZombie,17,15,EntityEnemyAnimal,0,0|
    "/>
        </entity_class>
        <entity_class name="companionVulture" extends="animalZombieVulture">
            <property name="Tags" value="entity,animal,friendly,vulture,companion"/>
            <property name="SoundIdleProne" value=""/>
            <property name="SoundIdleStand" value=""/>
            <property name="SoundDetected" value=""/>
            <property name="SoundAlert" value=""/>
            <property name="SoundHurt" value=""/>
            <property name="Faction" value="whiteriver"/>
            <property name="EntityFlags" value="animal"/>
            <property name="ExperienceGain" value="0"/>
            <property name="LootDropProb" value="0"/>
            <property name="LootDropEntityClass" value="EntityLootContainerAnimalComp"/>
            <property name="AITask" value="
    ApproachAndAttackTarget class=EntityZombie,30,EntityEnemyAnimal,20|
    Look|
    Wander|
    "/>
            <property name="AITarget" value="
    SetAsTargetIfHurt class=EntityZombie,EntityEnemyAnimal|
    SetNearestEntityAsTarget class=EntityZombie,17,15,EntityEnemyAnimal,0,0|
    "/>
        </entity_class>
        <entity_class name="companionMountainLion" extends="animalMountainLion">
            <property name="Tags" value="entity,animal,friendly,mountainlion,companion"/>
            <property name="SoundIdleProne" value=""/>
            <property name="SoundIdleStand" value=""/>
            <property name="SoundDetected" value=""/>
            <property name="SoundAlert" value=""/>
            <property name="SoundHurt" value=""/>
            <property name="Faction" value="whiteriver"/>
            <property name="EntityFlags" value="animal"/>
            <property name="ExperienceGain" value="0"/>
            <property name="LootDropProb" value="0"/>
            <property name="LootDropEntityClass" value="EntityLootContainerAnimalComp"/>
            <property name="AITask" value="
    ApproachAndAttackTarget class=EntityZombie,30,EntityEnemyAnimal,20|
    Look|
    Wander|
    "/>
            <property name="AITarget" value="
    SetAsTargetIfHurt class=EntityZombie,EntityEnemyAnimal|
    SetNearestEntityAsTarget class=EntityZombie,17,15,EntityEnemyAnimal,0,0|
    "/>
        </entity_class>
        <entity_class name="companionCoyote" extends="animalCoyote">
            <property name="Tags" value="entity,animal,friendly,coyote,companion"/>
            <property name="SoundIdleProne" value=""/>
            <property name="SoundIdleStand" value=""/>
            <property name="SoundDetected" value=""/>
            <property name="SoundAlert" value=""/>
            <property name="SoundHurt" value=""/>
            <property name="Faction" value="whiteriver"/>
            <property name="EntityFlags" value="animal"/>
            <property name="ExperienceGain" value="0"/>
            <property name="LootDropProb" value="0"/>
            <property name="LootDropEntityClass" value="EntityLootContainerAnimalComp"/>
            <property name="AITask" value="
    ApproachAndAttackTarget class=EntityZombie,30,EntityEnemyAnimal,20|
    Look|
    Wander|
    "/>
            <property name="AITarget" value="
    SetAsTargetIfHurt class=EntityZombie,EntityEnemyAnimal|
    SetNearestEntityAsTarget class=EntityZombie,17,15,EntityEnemyAnimal,0,0|
    "/>
        </entity_class>
        <!-- Vehicle placeholder used when riding the dire wolf. Extends motorcycle behavior. -->
        <entity_class name="vehicleDireWolf" extends="vehicleMotorcycle">
            <property name="Tags" value="entity,vehicle,direwolfvehicle,companion"/>
            <property name="UserSpawnType" value="None"/>
            <property name="ExperienceGain" value="0"/>
            <property name="LootDropProb" value="0"/>
            <property name="TimeStayAfterDeath" value="0"/>
            <property name="EntityType" value="Vehicle"/>
            <!-- Link cvars: dwOwnerId, dwLinkedWolfId -->
        </entity_class>
        <entity_class name="companionDoe" extends="animalDoe">
            <property name="Tags" value="entity,animal,friendly,doe,deer,companion"/>
            <property name="SoundIdleProne" value=""/>
            <property name="SoundIdleStand" value=""/>
            <property name="SoundDetected" value=""/>
            <property name="SoundAlert" value=""/>
            <property name="SoundHurt" value=""/>
            <property name="Faction" value="whiteriver"/>
            <property name="EntityFlags" value="animal"/>
            <property name="ExperienceGain" value="0"/>
            <property name="LootDropProb" value="0"/>
            <property name="LootDropEntityClass" value="EntityLootContainerAnimalComp"/>
            <property name="AITask" value="
    ApproachAndAttackTarget class=EntityZombie,30,EntityEnemyAnimal,20|
    Look|
    Wander|
    "/>
            <property name="AITarget" value="
    SetAsTargetIfHurt class=EntityZombie,EntityEnemyAnimal|
    SetNearestEntityAsTarget class=EntityZombie,17,15,EntityEnemyAnimal,0,0|
    "/>
        </entity_class>
        <entity_class name="companionBuck" extends="animalStag">
            <property name="Tags" value="entity,animal,friendly,buck,deer,companion"/>
            <property name="SoundIdleProne" value=""/>
            <property name="SoundIdleStand" value=""/>
            <property name="SoundDetected" value=""/>
            <property name="SoundAlert" value=""/>
            <property name="SoundHurt" value=""/>
            <property name="Faction" value="whiteriver"/>
            <property name="EntityFlags" value="animal"/>
            <property name="ExperienceGain" value="0"/>
            <property name="LootDropProb" value="0"/>
            <property name="LootDropEntityClass" value="EntityLootContainerAnimalComp"/>
            <property name="AITask" value="
    ApproachAndAttackTarget class=EntityZombie,30,EntityEnemyAnimal,20|
    Look|
    Wander|
    "/>
            <property name="AITarget" value="
    SetAsTargetIfHurt class=EntityZombie,EntityEnemyAnimal|
    SetNearestEntityAsTarget class=EntityZombie,17,15,EntityEnemyAnimal,0,0|
    "/>
        </entity_class>
        <entity_class name="companionSnake" extends="animalSnake">
            <property name="Tags" value="entity,animal,friendly,snake,companion"/>
            <property name="SoundIdleProne" value=""/>
            <property name="SoundIdleStand" value=""/>
            <property name="SoundDetected" value=""/>
            <property name="SoundAlert" value=""/>
            <property name="SoundHurt" value=""/>
            <property name="Faction" value="whiteriver"/>
            <property name="EntityFlags" value="animal"/>
            <property name="ExperienceGain" value="0"/>
            <property name="LootDropProb" value="0"/>
            <property name="LootDropEntityClass" value="EntityLootContainerAnimalComp"/>
            <property name="AITask" value="
    ApproachAndAttackTarget class=EntityZombie,30,EntityEnemyAnimal,20|
    Look|
    Wander|
    "/>
            <property name="AITarget" value="
    SetAsTargetIfHurt class=EntityZombie,EntityEnemyAnimal|
    SetNearestEntityAsTarget class=EntityZombie,17,15,EntityEnemyAnimal,0,0|
    "/>
        </entity_class>
        <entity_class name="companionRabbit" extends="animalRabbit">
            <property name="Tags" value="entity,animal,friendly,rabbit,bunny,companion"/>
            <property name="SoundIdleProne" value=""/>
            <property name="SoundIdleStand" value=""/>
            <property name="SoundDetected" value=""/>
            <property name="SoundAlert" value=""/>
            <property name="SoundHurt" value=""/>
            <property name="Faction" value="whiteriver"/>
            <property name="EntityFlags" value="animal"/>
            <property name="ExperienceGain" value="0"/>
            <property name="LootDropProb" value="0"/>
            <property name="LootDropEntityClass" value="EntityLootContainerAnimalComp"/>
            <property name="AITask" value="
    ApproachAndAttackTarget class=EntityZombie,30,EntityEnemyAnimal,20|
    Look|
    Wander|
    "/>
            <property name="AITarget" value="
    SetAsTargetIfHurt class=EntityZombie,EntityEnemyAnimal|
    SetNearestEntityAsTarget class=EntityZombie,17,15,EntityEnemyAnimal,0,0|
    "/>
        </entity_class>
    </append>
</configs>

